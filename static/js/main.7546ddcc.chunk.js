(this.webpackJsonpfaucet=this.webpackJsonpfaucet||[]).push([[0],{56:function(t,e,n){},58:function(t,e){},66:function(t,e){},73:function(t,e,n){"use strict";n.r(e);var a=n(11),i=n.n(a),r=n(43),c=n.n(r),o=(n(56),n(3)),s=n(4),u=n(6),l=n(5),h=n(32),v=n(49),f=n(48),d=n(22),m=function(){function t(){Object(o.a)(this,t)}return Object(s.a)(t,[{key:"initWeb3",value:function(){var t=new d.a.providers.Web3Provider(window.ethereum);t.on("network",(function(t,e){e&&window.location.reload()}));var e=t?t.getSigner():null;return{provider:t,signer:e}}},{key:"metamaskLogin",value:function(){return new Promise((function(t,e){window.ethereum&&window.ethereum.request({method:"eth_requestAccounts"}).then((function(n){n.length>0?t(n[0]):e("No accounts found from eth_requestAccounts")})).catch((function(t){return e(t)}))}))}},{key:"getUserAccount",value:function(t){return new Promise((function(e,n){t?t.getAddress().then((function(t){return e(t)})).catch((function(t){return n("user not logged in")})):n("signer is null")}))}},{key:"getContract",value:function(t,e,n){return new Promise((function(a,i){if(t)try{a(new d.a.Contract(e,n,t))}catch(r){i(r)}else i("web3.getContract provider not set")}))}},{key:"getWallet",value:function(t,e){return new Promise((function(n,a){try{n(new d.a.Wallet(t,e))}catch(i){a(i)}}))}}]),t}(),g=n(76),b=n(9),p=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;Object(o.a)(this,n),a=e.call(this,t);var i=new m,r=i.initWeb3(),c=r.provider,s=r.signer;return a.state={web3:i,provider:c,signer:s,account:null,wallet:null,spinner:!1,privateKey:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.state.web3.getUserAccount(this.signer).then((function(e){t.setState({account:e})})).catch((function(e){console.log(e),t.metamaskLogin()}))}},{key:"metamaskLogin",value:function(){var t=this;this.state.web3.metamaskLogin().then((function(e){t.setState({account:e})}))}},{key:"getEth",value:function(){var t=this;if(this.state.wallet&&this.state.account){this.setState({spinner:!0});var e={to:this.state.account,value:d.a.utils.parseEther("2.0")};this.state.wallet.sendTransaction(e).then((function(){return t.setState({spinner:!1})})).catch((function(){return t.setState({spinner:!1})}))}}},{key:"onPrivateKeyChange",value:function(t){this.setState({privateKey:t.target.value})}},{key:"onSetPrivateKeyClick",value:function(){var t=this;this.state.privateKey&&this.state.provider&&this.state.web3.getWallet(this.state.privateKey,this.state.provider).then((function(e){t.setState({wallet:e})})).catch((function(t){console.log(t),alert("failed to set wallet with that private key, check console for error")}))}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"container text-center",children:!this.state.account&&Object(b.jsx)(h.a,{variant:"primary",className:"mx-auto col-6",onClick:this.metamaskLogin.bind(this),children:"Login"})||Object(b.jsxs)(v.a,{gap:2,children:[Object(b.jsx)("h3",{children:this.state.account}),Object(b.jsxs)(g.a,{children:[Object(b.jsx)("input",{type:"text",placeholder:"Faucet Private Key",className:"form-control mx-auto w-50",onChange:this.onPrivateKeyChange.bind(this)}),Object(b.jsx)(h.a,{variant:"primary",className:"mx-auto col-6",onClick:this.onSetPrivateKeyClick.bind(this),children:"Set Private Key"})]}),this.state.wallet&&(this.state.spinner&&Object(b.jsx)(f.a,{animation:"border",className:"mx-auto",role:"status"})||Object(b.jsx)(h.a,{variant:"primary",className:"mx-auto col-6",onClick:this.getEth.bind(this),children:"Get Eth"}))]})})}}]),n}(i.a.Component);n(72);c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.7546ddcc.chunk.js.map